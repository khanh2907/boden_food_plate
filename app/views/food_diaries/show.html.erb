<div class="row">
<div class="col-md-3 food-search-bar" style="display:none;">
  <div class="food-wrapper">
  <h3>Foods</h3>
  <div class="foods">
    <table class="table table-striped" id="foods-table">
      <thead>
      <th></th>
      <th>Name</th>
      </thead>
      <tbody>
      <% Food.all.each do |food| %>
        <tr>
          <td><img src="/avatar.png" height="50" id="<%= food.id %>" class="draggable"/></td>
          <td><%= food.name %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
  </div>
</div>

<div class="col-md-9 plates-div" style="display:none;">
  <div class="row">
    <div class="col-md-6">
      <bplate class="droppable"></bplate>
    </div>
    <div class="col-md-4 form-box plate-details">
      <input class="form-control" placeholder="Meal Name"></input>
      <table class="table">
        <thead>
          <th>Food</th>
          <th>Quantity</th>
        </thead>
        <tbody>
          <tr>
            <td>Tacos</td>
            <td>3</td>
          </tr>
        </tbody>
      </table>
      <a class="btn btn-danger btn-lg">Empty Plate</a>
    </div>
    <div>

    </div>
  </div>

  <div class="row">
  <div class="game-wrapper">
    <div class="table-wrapper" style="opacity: 1;">
      <div class="table">
        <div>
        <plate class="strobe"></plate>
        <plate class=""></plate>
        <plate class=""></plate>
        <plate class=""></plate>
        <plate class=""></plate>
        <plate class=""></plate>
        </div>
        <div>
        <a class="btn btn-primary btn-lg">New Plate</a>
        <a class="btn btn-success btn-lg pull-right">Complete Food Diary</a>
        </div>
      </div>
      <div class="table-edge" style="opacity: 1;">
      </div>
    </div>
  </div>
  </div>
</div>
</div>
<script>
  // Initialise the food table
  var $table = $('#foods-table').dataTable({
    iDisplayLength: 7,
    bLengthChange: false,
    pagingType: 'simple'
  });

  $('.col-xs-6').first().remove();

  $(window).load(function(){

    $table.$('tr').each(function(index) {
      setDrag($(this).find('.draggable'));
    })

    function setDrag(obj) {
      obj.draggable({
        revert: "invalid",
        helper: "clone",
        cursor: "move"
      });
    }

    $(".droppable").droppable({
      accept: '.draggable',
      drop: function(event, ui) {
        $(this).append($(ui.draggable).clone());
      }
    });

    $('.food-search-bar').toggle( "slide");

    $('.plates-div').toggle( "slide");
  });

</script>
